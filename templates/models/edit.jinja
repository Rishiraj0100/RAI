{% extends "layout.jinja" %}

{% block title %}Editing {{ model.name }} - RAI{% endblock title %}

{% block contents %}
<section class="min-h-screen bg-primary-950">
    <div class="flex min-h-screen items-center text-white justify-center">
        <div class="flex flex-col px-6 text-lg">
            <form method="POST" class="grid grid-cols-1 p-6 sm:grid-cols-2 sm:gap-4 rounded-lg bg-primary-900 shadow-lg" style="backdrop-filter: blur(8px);" onsubmit="validateForm(event)">
                <div class="mt-2">
                    <label for="name">Name</label>
                    <input is="input-c" type="text" id="name" name="name" value="{{ model.name }}" required>
                </div>
                <div class="mt-2">
                    <label for="engine">Engine</label>
                    <select is="select-c" name="engine" id="engine" class="hidden">
                        {% for engine in engines %}
                            <option value="{{engine}}" {{ 'selected' if model.engine == engine else '' }}>{{engine}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mt-2 col-span-2">
                    <label for="description">Description</label>
                    <textarea is="textarea-c" id="description" name="description" rows="4" required placeholder="A brief description of what your AI does.">{{ model.description }}</textarea>
                </div>
                <div class="mt-2 col-span-2">
                    <label for="backstory">Backstory</label>
                    <textarea is="textarea-c" id="backstory" name="backstory" rows="4" required placeholder="Provide a short backstory for your AI.">{{ model.backstory }}</textarea>
                </div>
                <div class="mt-2 col-span-2">
                    <button type="submit" is="button-c"  class="text-md bg-amber-600 border float-right">Create</button>
                </div>
            </form>
        </div>
    </div>
</section>
<script>
function validateForm(event) {
    const name = document.getElementById('name').value;
    if (name.length < 3 || name.length > 50) {
        event.preventDefault();
        popup('AI Name must be between 3 and 50 characters long!', 'error');
        return false;
    }
    const description = document.getElementById('description').value;
    if (description.length < 10 || description.length > 300) {
        event.preventDefault();
        popup('Description must be between 10 and 500 characters long!', 'error');
        return false;
    }
    const backstory = document.getElementById('backstory').value;
    if (backstory.length < 10 || backstory.length > 500) {
        event.preventDefault();
        popup('Backstory must be between 10 and 1000 characters long!', 'error');
        return false;
    }
    return true;
}
</script>
{% endblock contents %}